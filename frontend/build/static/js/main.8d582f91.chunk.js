(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{46:function(e,t,n){e.exports=n(94)},75:function(e,t,n){var r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),a=r.mongoURI,o=r.secretOrKey,s=r.googleMapKey;a?(console.log("secrets from env, we're in heroku!"),e.exports={mongoURI:a,secretOrKey:o,googleMapKey:s}):(console.log("secrets from local file, we're in local!"),e.exports=n(76))},76:function(e,t){e.exports={mongoURI:"mongodb+srv://dev:UXh5kReX9QZ7r63k@cluster0.4dlx0.mongodb.net/db?retryWrites=true&w=majority",secretOrKey:"QRbvpOpohjeLXPYmNpKUKMKUulEac5wC",googleMapKey:"AIzaSyBXsdt7pBaD-tiMFIksB9ctNs-t7CxRB20"}},94:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(18),s=n.n(o),c=n(5),i=n(14),l=n(45),u=n(2),d=function(e){return{loggedIn:e.session.isAuthenticated}},p=Object(u.g)(Object(c.b)(d)((function(e){var t=e.component,n=e.path,r=e.loggedIn,o=e.exact;return a.a.createElement(u.b,{path:n,exact:o,render:function(e){return r?a.a.createElement(u.a,{to:"/dash"}):a.a.createElement(t,e)}})}))),m=(Object(u.g)(Object(c.b)(d)((function(e){var t=e.component,n=e.loggedIn,r=Object(l.a)(e,["component","loggedIn"]);return a.a.createElement(u.b,Object.assign({},r,{render:function(e){return n?a.a.createElement(t,e):a.a.createElement(u.a,{to:"/login"})}}))}))),n(23)),h=n.n(m),E=function(e){e?h.a.defaults.headers.common.Authorization=e:delete h.a.defaults.headers.common.Authorization},b=n(22),v=n.n(b),f=function(e){return{type:"RECEIVE_CURRENT_USER",currentUser:e}},g=function(e){return{type:"RECEIVE_SESSION_ERRORS",errors:e}},O=function(e){return function(t){return(n=e,h.a.post("/api/users/register",n)).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),E(n);var r=v()(n);t(f(r))}),(function(e){return t(g(e.response.data))}));var n}},j=function(e){return function(t){return(n=e,h.a.post("/api/users/login",n)).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),E(n);var r=v()(n);t(f(r))})).catch((function(e){t(g(e.response.data))}));var n}},S=function(){return function(e){localStorage.removeItem("jwtToken"),E(!1),e({type:"RECEIVE_USER_LOGOUT"})}},y=n(9),k=n(10),w=n(13),R=n(12),C=n(11),I=function(e){Object(R.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(y.a)(this,n),(r=t.call(this,e)).logoutUser=r.logoutUser.bind(Object(w.a)(r)),r.getLinks=r.getLinks.bind(Object(w.a)(r)),r}return Object(k.a)(n,[{key:"logoutUser",value:function(e){e.preventDefault(),this.props.logout()}},{key:"getLinks",value:function(){return this.props.loggedIn?a.a.createElement("div",null,a.a.createElement("button",{onClick:this.logoutUser},"Logout")):a.a.createElement("div",null,a.a.createElement(i.b,{to:"/signup"},"Signup"),a.a.createElement(i.b,{to:"/login"},"Login"))}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Save the Date"),this.getLinks())}}]),n}(a.a.Component),U=Object(c.b)((function(e){return{loggedIn:e.session.isAuthenticated}}),{logout:S})(I),_=function(e){Object(R.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Save The Date"),a.a.createElement("footer",null,"Copyright \xa9 2020 Save The Date"))}}]),n}(a.a.Component),T=n(20),x=function(e){Object(R.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(y.a)(this,n),(r=t.call(this,e)).state={email:"",password:"",errors:{}},r.handleSubmit=r.handleSubmit.bind(Object(w.a)(r)),r.renderErrors=r.renderErrors.bind(Object(w.a)(r)),r}return Object(k.a)(n,[{key:"componentWillReceiveProps",value:function(e){!0===e.currentUser&&this.props.history.push("/dash"),this.setState({errors:e.errors})}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(T.a)({},e,n.currentTarget.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};this.props.login(t)}},{key:"renderErrors",value:function(){var e=this;return a.a.createElement("ul",null,Object.keys(this.state.errors).map((function(t,n){return a.a.createElement("li",{key:"error-".concat(n)},e.state.errors[t])})))}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("div",null,a.a.createElement("input",{type:"text",value:this.state.email,onChange:this.update("email"),placeholder:"Email"}),a.a.createElement("br",null),a.a.createElement("input",{type:"password",value:this.state.password,onChange:this.update("password"),placeholder:"Password"}),a.a.createElement("br",null),a.a.createElement("input",{type:"submit",value:"Submit"}),this.renderErrors())))}}]),n}(a.a.Component),L=Object(u.g)(x),N=Object(c.b)((function(e){return{errors:e.errors.session}}),(function(e){return{login:function(t){return e(j(t))}}}))(L),D=function(e){Object(R.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(y.a)(this,n),(r=t.call(this,e)).state={email:"",handle:"",password:"",password2:"",errors:{}},r.handleSubmit=r.handleSubmit.bind(Object(w.a)(r)),r.clearedErrors=!1,r}return Object(k.a)(n,[{key:"componentWillReceiveProps",value:function(e){!0===e.signedIn&&this.props.history.push("/dash"),console.log(this.state),this.setState({errors:e.errors})}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(T.a)({},e,n.currentTarget.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,handle:this.state.handle,password:this.state.password,password2:this.state.password2};this.props.signup(t,this.props.history)}},{key:"renderErrors",value:function(){var e=this;return a.a.createElement("ul",null,Object.keys(this.state.errors).map((function(t,n){return a.a.createElement("li",{key:"error-".concat(n)},e.state.errors[t])})))}},{key:"render",value:function(){return a.a.createElement("div",{className:"signup-form-container"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("div",{className:"signup-form"},a.a.createElement("br",null),a.a.createElement("input",{type:"text",value:this.state.email,onChange:this.update("email"),placeholder:"Email"}),a.a.createElement("br",null),a.a.createElement("input",{type:"text",value:this.state.handle,onChange:this.update("handle"),placeholder:"Handle"}),a.a.createElement("br",null),a.a.createElement("input",{type:"password",value:this.state.password,onChange:this.update("password"),placeholder:"Password"}),a.a.createElement("br",null),a.a.createElement("input",{type:"password",value:this.state.password2,onChange:this.update("password2"),placeholder:"Confirm Password"}),a.a.createElement("br",null),a.a.createElement("input",{type:"submit",value:"Submit"}),this.renderErrors())))}}]),n}(a.a.Component),K=Object(u.g)(D),A=Object(c.b)((function(e){return{signedIn:e.session.isSignedIn,errors:e.errors.session}}),(function(e){return{signup:function(t){return e(O(t))}}}))(K),P=n(42),V=n.n(P),z=n(75),B=function(e){Object(R.a)(n,e);var t=Object(C.a)(n);function n(e){return Object(y.a)(this,n),t.call(this,e)}return Object(k.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:".map-cont"},a.a.createElement("div",null,"this should be a map"),a.a.createElement(V.a,{bootstrapURLKeys:{key:z},defaultCenter:this.props.center,defaultZoom:this.props.zoom}))}}]),n}(a.a.Component);B.defaultProps={center:{lat:40.7678805,lng:-73.97103059999999},zoom:13};var M=B,W=Object(c.b)((function(e,t){return{state:e}}),null)(M),X=function(){return a.a.createElement("div",null,a.a.createElement(U,null),a.a.createElement(u.d,null,a.a.createElement(p,{exact:!0,path:"/",component:_}),a.a.createElement(u.b,{exact:!0,path:"/dash",component:W}),a.a.createElement(p,{exact:!0,path:"/login",component:N}),a.a.createElement(p,{exact:!0,path:"/signup",component:A})))},G=function(e){var t=e.store;return a.a.createElement(c.a,{store:t},a.a.createElement(i.a,null,a.a.createElement(X,null)))},H=n(15),J=n(43),Q=n(44),Z=n.n(Q),F=n(24),Y={isAuthenticated:!1,user:{}},q=[],$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_SESSION_ERRORS":return t.errors;case"RECEIVE_CURRENT_USER":return q;default:return e}},ee=Object(H.c)({session:$}),te=Object(H.c)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_CURRENT_USER":return Object(F.a)(Object(F.a)({},e),{},{isAuthenticated:!!t.currentUser,user:t.currentUser});case"RECEIVE_USER_LOGOUT":return{isAuthenticated:!1,user:void 0};case"RECEIVE_USER_SIGN_IN":return Object(F.a)(Object(F.a)({},e),{},{isSignedIn:!0});default:return e}},errors:ee}),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(H.d)(te,e,Object(H.a)(J.a,Z.a))};document.addEventListener("DOMContentLoaded",(function(){var e;if(localStorage.jwtToken){E(localStorage.jwtToken);var t=v()(localStorage.jwtToken);e=ne({session:{isAuthenticated:!0,user:t}});var n=Date.now()/1e3;t.exp<n&&(e.dispatch(S()),window.location.href="/login")}else e=ne({});var r=document.getElementById("root");s.a.render(a.a.createElement(G,{store:e}),r)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.8d582f91.chunk.js.map